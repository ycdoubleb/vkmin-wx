<view class="page" xmlns:wx="http://www.w3.org/1999/xhtml">
  <view class="page__bd" wx:if="{{merchant==null}}">
    <form bindsubmit='formSubmit'>
      <view class="weui-toptips weui-toptips_warn" wx:if="{{showTopTips}}" bindtap='closeTopTips'>{{errorMsg}}</view>

      <view class="weui-cells weui-cells_after-title">

        <view class="weui-cell weui-cell_input">
          <view class="weui-cell__hd">
            <view class="weui-label">代理商</view>
          </view>
          <view class="weui-cell__bd agency-box" bindtap='agencyScan'>
            <input class="weui-input" placeholder="请扫代理商二维码" disabled='true' value='{{agency.name}}' />
            <image class='agency-scan-icon' src='../../images/icon/scan.png'></image>
          </view>
        </view>

        <view class="weui-cell weui-cell_input weui-cell_vcode">
          <view class="weui-cell__hd">
            <view class="weui-label">名称</view>
          </view>
          <view class="weui-cell__bd">
            <input class="weui-input" name='merchant_name' placeholder="请输入商家名称" />
          </view>
        </view>

        <view class="weui-cell weui-cell_select">
          <view class="weui-cell__hd weui-cell__hd_in-select-after">
            <view class="weui-label">类型</view>
          </view>
          <view class="weui-cell__bd">
            <picker bindchange="typeChange" value="{{typeIndex}}" range="{{types}}" range-key="name">
              <view class="weui-select weui-select_in-select-after">{{types[typeIndex].name}}</view>
            </picker>
          </view>
        </view>

        <view class="weui-cell weui-cell_input">
          <view class="weui-cell__hd">
            <view class="weui-label">封面</view>
          </view>
          <view class="weui-cell__bd merchat-cover-box" bindtap='uploadMerchantCover'>
            <text class='placeholder' wx:if="{{merchat_cover_url == null}}">请上传封面</text>
            <image class='merchat-cover' src='{{merchat_cover_url}}'></image>
            <image class='merchat-cover-camera' src='../../images/icon/camera-fill.png'></image>
          </view>
        </view>


        <view class="weui-cell weui-cell_input weui-cell_vcode">
          <view class="weui-cell__hd">
            <view class="weui-label">联系人</view>
          </view>
          <view class="weui-cell__bd">
            <input class="weui-input" name='contact_name' placeholder="请输入联系人名称" />
          </view>
        </view>

        <view class="weui-cell weui-cell_input weui-cell_vcode">
          <view class="weui-cell__hd">
            <view class="weui-label">手机</view>
          </view>
          <view class="weui-cell__bd">
            <input class="weui-input" placeholder="请输入联系人手机" value='{{contact_phone}}' />
          </view>
          <view class="weui-cell__ft">
            <button open-type="getPhoneNumber" bindgetphonenumber="getPhoneNumber">获取手机</button>
          </view>
        </view>

        <view class="weui-cell weui-cell_select">
          <view class="weui-cell__hd weui-cell__hd_in-select-after">
            <view class="weui-label">省市区</view>
          </view>
          <view class="weui-cell__bd">
            <picker wx:if="{{regionData != null}}" mode="multiSelector" bindchange="regionChange" bindcolumnchange="regionColumnChange" value="{{regionIndex}}" range-key="n" range="{{regions}}">
              <view class="weui-select weui-select_in-select-after" wx:if="{{regionData != null}}">
                {{regions[0][regionIndex[0]].n}}，{{regions[1][regionIndex[1]].n}}，{{regions[2][regionIndex[2]].n}}
              </view>
            </picker>
            <view class="weui-select" wx:if="{{regionData == null}}">Loading...</view>
          </view>
        </view>

        <view class="weui-cell weui-cell_input weui-cell_vcode">
          <view class="weui-cell__hd">
            <view class="weui-label">详细地址</view>
          </view>
          <view class="weui-cell__bd">
            <input class="weui-input" name='address' placeholder="请输入详细地址，无需包括区域" />
          </view>
        </view>

      </view>

      <checkbox-group bindchange="bindAgreeChange">
        <label class="weui-agree" for="weuiAgree">
          <view class="weui-agree__text">
            <checkbox class="weui-agree__checkbox" id="weuiAgree" value="agree" checked="{{isAgree}}" />
            <view class="weui-agree__checkbox-icon">
              <icon class="weui-agree__checkbox-icon-check" type="success_no_circle" size="9" wx:if="{{isAgree}}"></icon>
            </view>
            阅读并同意
            <navigator url="/pages/apply/pact/pact" class="weui-agree__link">《相关条款》</navigator>
          </view>
        </label>
      </checkbox-group>

      <view class="weui-btn-area">
        <button class="weui-btn" form-type='submit' type="primary" disabled='{{!isAgree || types == null}}'> 确定</button>
      </view>
    </form>
  </view>

  <view class='page__bd merchant' wx:if="{{merchant!=null}}">
    <view class='cover-box'>
      <image class='cover_url' mode='aspectFit' src='{{merchant.cover_url}}'></image>
    </view>
    <view class="weui-cells weui-cells_after-title">
      <view class="weui-cell">
        <view class="weui-cell__bd">状态</view>
        <view class="weui-cell__ft">审核中</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">商家名称</view>
        <view class="weui-cell__ft">{{merchant.name}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">所属代理商</view>
        <view class="weui-cell__ft">{{merchant.agency_name}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">类型</view>
        <view class="weui-cell__ft">{{merchant.type_name}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">联系人</view>
        <view class="weui-cell__ft">{{merchant.contact_name}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">手机</view>
        <view class="weui-cell__ft">{{merchant.contact_phone}}</view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">地址</view>
        <view class="weui-cell__ft address">{{merchant.address_name}}</view>
      </view>
    </view>

  </view>
</view>